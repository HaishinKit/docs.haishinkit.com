{"metadata":{"role":"article","roleHeading":"Article","title":"Offscreen rendering api.","modules":[{"name":"HaishinKit"}]},"hierarchy":{"paths":[["doc:\/\/HaishinKit\/documentation\/HaishinKit"]]},"primaryContentSections":[{"content":[{"text":"Overview","anchor":"Overview","level":2,"type":"heading"},{"inlineContent":[{"type":"text","text":"HaishinKit provides APIs for overlaying still images on camera footage and for embedding text. These features are collectively referred to as "},{"isActive":true,"identifier":"https:\/\/docs.haishinkit.com\/swift\/latest\/documentation\/haishinkit\/screenobject","type":"reference"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"Filtering with CIFilter is also supported, and for use cases such as applying a mosaic effect to camera footage, the use of CIFilter is recommended."}],"type":"paragraph"},{"text":"Usage","anchor":"Usage","level":2,"type":"heading"},{"inlineContent":[{"type":"text","text":"Here is an overview of how to use the typical ScreenObject objects."}],"type":"paragraph"},{"text":"ImageScreenObject","anchor":"ImageScreenObject","level":3,"type":"heading"},{"inlineContent":[{"text":"An example of compositing images.","type":"text"}],"type":"paragraph"},{"code":["let imageScreenObject = ImageScreenObject()","let imageURL = URL(fileURLWithPath: Bundle.main.path(forResource: \"game_jikkyou\", ofType: \"png\") ?? \"\")","if let provider = CGDataProvider(url: imageURL as CFURL) {","  imageScreenObject.verticalAlignment = .bottom","  imageScreenObject.layoutMargin = .init(top: 0, left: 0, bottom: 16, right: 0)","  imageScreenObject.cgImage = CGImage(","    pngDataProviderSource: provider,","    decode: nil,","    shouldInterpolate: false,","    intent: .defaultIntent","  )","} else {","  print(\"no image\")","}","","try? await mixer.screen.addChild(imageScreenObject)"],"syntax":"swift","type":"codeListing"},{"text":"VideoTrackScreenObject","anchor":"VideoTrackScreenObject","level":3,"type":"heading"},{"inlineContent":[{"type":"text","text":"There may be situations where you want to capture the scenery with the rear camera while showing your facial expression with the front camera."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"First, set up the cameras as follows. Make sure to remember the track numbers, as they will be used later."}],"type":"paragraph"},{"code":["Task {","  let back = AVCaptureDevice.default(.builtInWideAngleCamera, for: .video, position: .back)","  try? await mixer.attachVideo(back, track: 0)","  let front = AVCaptureDevice.default(.builtInWideAngleCamera, for: .video, position: .front)","  try? await mixer.attachVideo(front, track: 1)","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"Track number 0 is designed to be rendered across the entire screen. In this case, we are specifying where to render track number 1."}],"type":"paragraph"},{"code":["Task { @ScreenActor in","  let videoScreenObject = VideoTrackScreenObject()","  videoScreenObject.cornerRadius = 32.0","  videoScreenObject.track = 1","  videoScreenObject.horizontalAlignment = .right","  videoScreenObject.layoutMargin = .init(top: 16, left: 0, bottom: 0, right: 16)","  videoScreenObject.size = .init(width: 160 * 2, height: 90 * 2)","  \/\/ You can add a CIFilter-based filter using the registerVideoEffect API.","  _ = videoScreenObject.registerVideoEffect(MonochromeEffect())","","  try? await mixer.screen.addChild(videoScreenObject)","}"],"syntax":"swift","type":"codeListing"}],"kind":"content"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/haishinkit\/offscreen"]}],"sections":[],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/HaishinKit\/documentation\/HaishinKit\/offscreen"},"kind":"article","schemaVersion":{"minor":3,"patch":0,"major":0},"references":{"https://docs.haishinkit.com/swift/latest/documentation/haishinkit/screenobject":{"title":"ScreenObjects","type":"link","titleInlineContent":[{"type":"text","text":"ScreenObjects"}],"url":"https:\/\/docs.haishinkit.com\/swift\/latest\/documentation\/haishinkit\/screenobject","identifier":"https:\/\/docs.haishinkit.com\/swift\/latest\/documentation\/haishinkit\/screenobject"},"doc://HaishinKit/documentation/HaishinKit":{"title":"HaishinKit","role":"collection","type":"topic","kind":"symbol","url":"\/documentation\/haishinkit","abstract":[{"text":"This is the main module. This module supports the RTMP protocol.","type":"text"}],"identifier":"doc:\/\/HaishinKit\/documentation\/HaishinKit"}}}